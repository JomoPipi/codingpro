<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link id="style" rel="stylesheet" type="text/css" href="css/styles.css" />
    <title>         Codingpro         </title>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-firestore.js"></script>
    <script src="problem_data.js"></script>
    <script src="ace.js"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#" onclick="goHome()" >         CodingPro         </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarColor01">
      <ul class="navbar-nav mr-auto">


        <li class="nav-item">
          <a class="nav-link" href="#" onclick="aboutPage()">         About         </a>
        </li>


        <ul class="nav nav-pills">
          <li class="nav-item dropdown show">
            <a class="nav-link dropdown-toggle btn-light" data-toggle="dropdown" 
            href="#" role="button" aria-haspopup="true" 
            aria-expanded="true">         Resources         </a>
            <div class="dropdown-menu" x-placement="top-start" style="position: absolute; transform: translate3d(0px, 30px, 0px); top: 0px; left: 0px; will-change: transform;">
              <a class="dropdown-header"> - other free coding websites - </a>
              <a class="dropdown-item" href="https://codingbat.com/prob/p187868" target="_blank"> Codingbat </a>
              <a class="dropdown-item" href="https://codewars.com" target="_blank">Codewars</a>
              <a class="dropdown-item" href="https://leetcode.com" target="_blank">Leetcode</a>
              <a class="dropdown-header"> - papers - </a>
              <a class="dropdown-item" href="https://www.inf.fu-berlin.de/lehre/WS03/alpi/lambda.pdf" target="_blank">Intro to Lambda Calculus</a>
              <a class="dropdown-header"> - videos - </a>
              <a class="dropdown-item" href="https://www.youtube.com/watch?v=XgK4YaMqQFg" target="_blank">Make a game in JavaScript</a>
              <a class="dropdown-item" href="https://www.youtube.com/watch?v=j1H3jAAGlEA" target="_blank">Learn DFS</a>
              <a class="dropdown-item" href="https://www.youtube.com/watch?v=gGQ-vAmdAOI" target="_blank">Learn BFS</a>
              <a class="dropdown-header"> - games - </a>
              <a class="dropdown-item" href="https://tomorrowcorporation.com/humanresourcemachine" target="_blank">Human Resource Machine</a>
    
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">submit suggestion</a>
            </div>
          </li>
        </ul>
        
      </ul>
      <form class="form-inline my-2 my-lg-0">
          <form class="form-inline my-2 my-lg-0">
            <button class="btn my-2 my-sm-0" style="color:black;" 
              type="submit">         Log In         </button>
          </form>
          <form class="form-inline my-2 my-lg-0">
            <button class="btn btn-primary my-2 my-sm-0" style="color:black;border-top-right-radius:9px;" 
              type="submit">         Create Account         </button>
          </form>
      </form>
    </div>
  </nav>
    
    <!-- <div style="float:right;  margin:0px; border: 1px solid lightgray;">
      <table><form method="post" action="/login">
      </form><tbody><tr><td>id/email</td><td>
        <input type="text" name="uname" size="20">
      </td>
    </tr>
    <tr>
      <td>password</td>
      <td>
        <input type="password" name="pw" size="20">
      </td>
    </tr>
    <tr>
      <td>

      </td>
      <td>
        <input type="submit" name="dologin" value="log in">
      </td>
    </tr>
     <input type="hidden" name="fromurl" value="/java"><tr>
       <td><a href="/reset">         forgot password         </a> |
       <td><a href="/reset">         create account         </a> 
      </td></tr></tbody></table></div> -->
      
    <center>
      <div style="width:100%" id="buttons-container">
        <h1 style="color:#88b;" class="display-1"> <br> 200 JavaScript Problems </h1>
        <br>
      </div>
    </center>
    <div id="problem-div"
      style="display:none;background-color: #eee; height:100%;">
      <div style="padding-left:5vw;">
        <h2 style="color:#88b;" id="problem-name"></h2>
        <p id="problem-description"></p>
        <center>
          <button type="button" class="btn" 
           style="color:#603;border:1px solid #fcc;border-radius: 15px;" id="attempt"
           onclick="runTests(); return false;"> Attempt </button>
        </center>
        <p id="problem-examples"></p>

        
        <div id="editor-output-container" style="display: block;">
          <div style="border:1px solid #999;width:550px;min-height:50vh;max-height:51vh;float:left;" id="editor"></div>
          <div id="output-table" style="margin-left:600px;"></div>
          <div style="clear:both;color:#0a0" id="all-pass-message"></div>
        </div>
        <a href="#" style="color:black;position:absolute;left:10px;bottom:10px;"
          onclick="alert('Try using the return keyword. Your code should be between the two curly brackets. { }')"> help </a>
      </div>    
    </div>
    
    <div id="about-page" style="display:none;margin-left: 2%;">
      <div class="jumbotron">
        <h1 class="display-3" style="color:#88b;">About</h1>
        <p class="lead">
          This website attempts to teach coding to first-time beginners who <br>
          may have never written a line of code. If you enjoy challenges, <br>
           then this is for you.
        </p>
        <hr class="my-4">
        <p style="font-size: 2em;">
        </p>
        <!-- <img src="https://lh3.googleusercontent.com/-O-a_S7nPsvM/XXOFGj4JgKI/AAAAAAAABHs/JzEfd0-5dC4yAxu8zdK-HcMR5G7H_dfGgCEwYBhgL/w140-h140-p/_2.JPG"> -->
      </div>
    </div>

      
      <canvas id="ctx" style="position:absolute;left:0;top:0;z-index:-9;background-color: rgba(255, 255, 255, 1);width:100%;height:100%;">
      </canvas>
    <script>
      var currentProblemId
      const D = x => document.getElementById(x),
            E = x => document.createElement(x)
      const output = D('output-table')


      Create_All_Buttons: {
        let color = [250,255,255], row = E('div')
        for (let i in PROBLEM_DATA) {
          const btn = E('button'), rgba = `rgba(21${i%4===0?0:2},21${i%4===1?0:2},21${i%4===2?0:2},0.6`
          btn.type = 'button'
          btn.classList.add('btn')
          btn.style.margin = '5px'
          btn.style.width = '80px'
          btn.style.height = '80px'
          btn.style.font = '20px Arial'
          btn.style.background = rgba
          btn.onmouseover=_=>btn.style.backgroundColor='#aae'
          btn.onmouseout=_=>btn.style.backgroundColor=rgba
          btn.id = i
          btn.onclick = _ => (showQuestion(btn.id), currentProblemId = btn.id)
          btn.innerHTML = (+i+1)
          row.appendChild(btn)
          if (i % 10 === 9) {            
            color.forEach((_,i) => color[i] -= 13)
            row.style.backgroundColor = `rgb(${color.join`,`})`
            D('buttons-container').appendChild(row)
            row = E('div')
          }
        }
      }


      var editor = window.ace.edit(D("editor"));
      const options = {
        enableBasicAutocompletion: true, // the editor completes the statement when you hit Ctrl + Space
        enableLiveAutocompletion: true, // the editor completes the statement while you are typing
        showPrintMargin: false, // hides the vertical limiting strip
        fontSize: "100%",
        maxLines: 1000,
        autoScrollEditorIntoView: true
      }
    function goHome() { 
      D('about-page').style.display='none'
      D('problem-div').style.display='none'
      D('buttons-container').style.display='block'
    }
    function aboutPage() {
      D('about-page').style.display='block'
      D('problem-div').style.display='none'
      D('buttons-container').style.display='none'
    }

    function showQuestion(n) {
      while (output.children[0]) output.removeChild(output.children[0])
      D('about-page').style.display='none'
      D('problem-div').style.display='block'
      D('buttons-container').style.display='none'

      D('problem-name').innerHTML = PROBLEM_DATA[n].name
      D('problem-description').innerHTML = PROBLEM_DATA[n].description
      D('problem-examples').innerHTML = PROBLEM_DATA[n].examples
      editor.setValue(PROBLEM_DATA[n].submission)
      editor.setOptions(options);
      editor.setTheme("ace/theme/chrome");
      editor.getSession().setMode("ace/mode/javascript");
      var row = editor.session.getLength() - 3
      editor.selection.moveTo(row)
      editor.navigateLineEnd()
      editor.focus()

    }

    function runTests() {
       'use strict'
        let passedAll = true       
        D('all-pass-message').innerHTML = output.innerHTML = ''
        // editor.focus()
        const { functionName, name, solution, testinputs } = PROBLEM_DATA[currentProblemId]
        var submission
        while (output.children[0]) output.removeChild(output.children[0])
        try { 
          const src = editor.getValue()
          eval(`${src}; submission = ${functionName}`) 
        } 
        catch(e) { output.innerHTML = e }
        console.log(typeof submission)
        if (typeof submission !== 'function') {
          output.innerHTML = `syntax error or ${functionName} needs to be a function.`
          return 
        }
        
        const table = E('table')
        addHeaders: { 
          const row = E('tr'); 
          ['Expected', 'Actual',''].forEach(r => {
            const R = E('th'); R.innerHTML = r
            R.style.backgroundColor = '#eee'
            row.append(R)
          })
          table.append(row) 
        }
        table.style.border = '1px solid #bbb'
        table.style.float = 'left'
        table.style.width = '40vw'
        table.style.height = '20px'
        table.style.margin = '1px'
        for (let args of testinputs) {
          try {
            var actual = submission(...args)
          } catch (e) {
            actual = e.toString()
          }
          const expected = solution(...args)
          const pass = actual === expected
          passedAll = passedAll && pass
          const row = E('tr')
          const [A,B,C] = [E('td'),E('td'),E('td')]
          A.innerHTML = `${functionName}(${args.join`,`}) → ${expected}`
          B.innerHTML = '' + actual
          C.style.color = pass ? '#505' : '#fff'
          C.innerHTML = pass ? 'passed!' : 'failed!'
          C.style.backgroundColor = pass ? '#0f0' : '#f00';
          [A,B,C].forEach(x => {
            x.style.border = '1px solid #bbb'
            row.append(x)
          })
          table.append(row) 
        }
        output.append(table)

        D('all-pass-message').innerHTML = passedAll ? "You've passed all the tests!" : ''
    }

    </script>

    <script>
      function range(n){ return [...Array(n)].map((_,i)=>i) }
      function flatMap(arr) { return [...arr.map(x=>x.pop?flatMap(x):x)] }
      function animateBackground(){
        const canvas = D('ctx')
        const ctx = canvas.getContext('2d')
        let W = canvas.width = window.innerWidth,
            H = canvas.height = window.innerHeight
        let time = 0

      setInterval(_=>{
        time++
        ctx.strokeStyle='#FAF'
        ctx.fillStyle='#fff'
        ctx.lineWidth = 1
        ctx.fillRect(0,0,W,H)
        ctx.beginPath()

        const speed = 3
        const n = 50, dx = W>>2, dy = H>>2
        const A = Math.tan(time/((n*speed)||1))+1 
        const B = Math.sin(time/((n*speed)||1))+1
        for (let x=-W*2; x<W*2; x += dx)
          for (let y=-H*2,i=0; y<H*2; y += dy, i++) {
            const [a,b,c,d,e,f,g,h] = [x/A,-x/A,x/B,-x/B,y/A,-y/A,y/B,-y/B]
            const [aa,bb,cc,dd] = i % 2 ? [a,b,c,d] : [e,f,g,h]
            ctx.bezierCurveTo(aa, bb, cc, dd, x*A, y*B)   
            ctx.moveTo(aa*B,bb*A)
          }
          
          ctx.stroke()
          ctx.closePath()
        },20) // 50 FPS
      }
      // animateBackground()
    </script>
    <script>
      
        const config = {
          apiKey: "AIzaSyAEu7t6BcYyJA1NqhMhYwSLVGbcUE4oivM",
          authDomain: "codingpro-5c5d9.firebaseapp.com",
          databaseURL: "https://codingpro-5c5d9.firebaseio.com",
          projectId: "codingpro-5c5d9",
          storageBucket: "codingpro-5c5d9.appspot.com",
          messagingSenderId: "350756630303",
          appId: "1:350756630303:web:1cf33ac22e3cd377534a2a"
        };

      firebase.initializeApp(config);

      // Initialize Cloud Firestore through Firebase
      const db = firebase.firestore();
      // db.settings({ timestampsInSnapshots: true })

      function renderDoc(doc) {
        console.log('doc.data',doc.data())
      }

      // db.collection('users').get().then(snapshot => {
      //     snapshot.docs.forEach(renderDoc)
      // })

      // db.collection("users").add({
      //     first: "Ada",
      //     last: "Lovelace",
      //     born: 1815
      // })
      // .then(function(docRef) {
      //     console.log("Document written with ID: ", docRef.id);
      // })
      // .catch(function(error) {
      //     console.error("Error adding document: ", error);
      // });

      function User(login,password) {
        this.login = login
        this.password = password
        this.completions = []
        this.submissions = []
      }

      function signUp(email,password) {
        firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          console.log(errorMessage)
        });
      }
      // signUp('ronaldmcorona@gmail.com','easypass123')

      function signIn(email,password) {
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          console.log(errorMessage)
        });
      }


    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


</body>
</html>
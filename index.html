<!DOCTYPE html>
<html lang="en">



  <script src="https://s3.amazonaws.com/stitch-sdks/js/bundles/4.4.0/stitch.js"></script>
  <script>
    const client = stitch.Stitch.initializeDefaultAppClient('codingpro-mdyat');

    const db = client.getServiceClient(stitch.RemoteMongoClient.factory, 'mongodb-atlas').db('CodingPro');

    client.auth.loginWithCredential(new stitch.AnonymousCredential()).then(user =>
      db.collection('CodingPro').updateOne({owner_id: client.auth.user.id}, {$set:{number:42}}, {upsert:true})
    ).then(() =>
      db.collection('CodingPro').find({owner_id: client.auth.user.id}, { limit: 100}).asArray()
    ).then(docs => {
        console.log("Found docs", docs)
        console.log("[MongoDB Stitch] Connected to Stitch")
    }).catch(err => {
      console.error(err)
    });
  </script>




  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <link id="style" rel="stylesheet" type="text/css" href="css/styles.css" />
      <title>         CodingPro         </title>
      <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-firestore.js"></script>
      <script src="problem_data.js"></script>
      <script src="ace.js"></script>
  </head>



  <body>
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: transparent;padding-left:2vw;padding-right:2vw;">
        <a class="navbar-brand" href="#"  onclick="goHome()" >         CodingPro         </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="aboutPage()">         About         </a>
              </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <form class="form-inline my-2 my-lg-0">
                  <div class="btn my-2 my-sm-0" style="color:#333;" class="log-in-sign-in"
                    onclick="logInPage()">         Log In         </div>
                </form>
                <form class="form-inline my-2 my-lg-0">
                  <div class="btn btn-primary my-2 my-sm-0" style="color:#333;border-top-right-radius:9px;" 
                    onclick="signUpPage()">         Create Account         </div>
                </form>
            </form>
        </div>
    </nav>




      <center>
        <div style="width:100%;" id="main-page">
          <h1 style="color:#87a;" class="display-4"> <br>         Learn JavaScript in 200 problems         </h1>
          <br>
        </div>
      </center>



      <div id="about-page" style="display:none;margin: 2%;">
        <div class="jumbotron">
          <h1 class="display-3" style="color:#87a;">         About         </h1>
          <p class="lead">
            This website attempts to teach coding to first-time beginners who <br>
            may have never written a line of code. If you enjoy challenges, <br>
              then this is for you.
          </p>
          <hr class="my-4">
          <p style="font-size: 2em;">
          </p>
          <!-- <img src="https://lh3.googleusercontent.com/-O-a_S7nPsvM/XXOFGj4JgKI/AAAAAAAABHs/JzEfd0-5dC4yAxu8zdK-HcMR5G7H_dfGgCEwYBhgL/w140-h140-p/_2.JPG"> -->
        </div>
          <a data-toggle="dropdown" 
          href="#" role="button" aria-haspopup="true" style="background-color: transparent;"
          aria-expanded="true">         More learning resources         </a>
          <div class="dropdown-menu" x-placement="top-start" style="position: absolute; transform: translate3d(0px, 30px, 0px); top: 0px; left: 0px; will-change: transform;">
            <a class="dropdown-header"> - other free coding websites - </a>
            <a class="dropdown-item" href="https://codingbat.com/prob/p187868" target="_blank"> Codingbat </a>
            <a class="dropdown-item" href="https://codewars.com" target="_blank">Codewars</a>
            <a class="dropdown-item" href="https://leetcode.com" target="_blank">Leetcode</a>
            <a class="dropdown-header"> - papers - </a>
            <a class="dropdown-item" href="https://www.inf.fu-berlin.de/lehre/WS03/alpi/lambda.pdf" target="_blank">Intro to Lambda Calculus</a>
            <a class="dropdown-header"> - videos - </a>
            <a class="dropdown-item" href="https://www.youtube.com/watch?v=XgK4YaMqQFg" target="_blank">Make a game in JavaScript</a>
            <a class="dropdown-item" href="https://www.youtube.com/watch?v=j1H3jAAGlEA" target="_blank">Learn DFS</a>
            <a class="dropdown-item" href="https://www.youtube.com/watch?v=gGQ-vAmdAOI" target="_blank">Learn BFS</a>
            <a class="dropdown-header"> - games - </a>
            <a class="dropdown-item" href="https://tomorrowcorporation.com/humanresourcemachine" target="_blank">Human Resource Machine</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">submit suggestion</a>
          </div>
      </div>

      <center>

        <div style="display:none; width:100%" id="sign-up-page">
          <h1 style="color:#87a;" class="display-4"> <br>         Create Account         </h1>
          <br>
          <div>
            <table>
              <tbody>
                  <tr><td>id/email</td><td>  <input type="text" name="uname" size="20"></td></tr>
                  <tr><td>password</td><td>  <input type="password" name="pw" size="20"></td></tr>
                  <tr><td>confirm </td><td>  <input type="password" name="pw" size="20"></td></tr>
                  <tr><td></td><td>  <input type="submit" name="dologin" value="go"></td></tr>
              </tbody>
            </table>
          </div>
        </div>



        <div style="display:none; width:100%" id="log-in-page">
          <h1 style="color:#87a;" class="display-4"> <br>         Log In         </h1>
          <br>
          <div>
            <table>
              <tbody>
                <tr><td>id/email</td><td>  <input type="text" name="uname" size="20"></td></tr>
                <tr><td>password</td><td>  <input type="password" name="pw" size="20"></td></tr>
                <tr><td></td><td>  <input type="submit" name="dologin" value="go"></td></tr>
              </tbody>
            </table>
          </div>
        </div>

      </center>

      <div id="problem-page"style="display:none;background-color: #fff; height:100%; width:100%;
      padding-right:2vw; padding-left:2vw; ">

        <div name="left-div" style="float:left; width:50vw;">
            <h2 style="color:#87a;margin-bottom: 0;" id="problem-name"></h2>
            <p style="float:left;"></p>
            <a id="previous" href="#" style="color:#87a;" onclick="showQuestion(currentProblemId-1)">         prev         </a>
            &nbsp; | &nbsp;
            <a id="next" href="#" style="color:#87a;" onclick="showQuestion(currentProblemId+1)">         next         </a> 
            &nbsp; | &nbsp;
            <a id="next" href="#" style="color:#87a;" onclick="resetQuestion(currentProblemId)">         reset         </a> 
            &nbsp; | &nbsp;
            <a href="#" id="problem-hint" style="color: rgba(120,120,150,0.5);" onclick="
            let x=D('hint');x.innerHTML=x.innerHTML?'':PROBLEM_DATA[currentProblemId].hint
            ">         help         </a>
            <br> <br>
            <p id="problem-description"></p>
              
            <p style="float:left;width:40vw;" id="problem-examples"></p> 

            <button type="button" class="btn" 
            style="color:#603;border-left:0.5px solid #999; border-top:0.5px solid #777; float:right; 
            border-radius: 15px;border-bottom:1.7px solid #777; border-right:1.7px solid #999;" id="attempt"
            onclick="runTests(); return false;">         GO         </button>

            
            <div style="border:1px solid #999;width:100%; clear: both;
            min-height:50vh;max-height:50vh;"            id="editor"            ></div>
        </div>


        <div name="right-div" style="float: right; width:42vw; padding: 2%; padding-top: 12vh;">
          <div             id="output-table"              style="width:100%;"></div>

          <div style="color:#0a0;" id="all-pass-message"></div>
          <div id="hint"></div>
        </div>    

      </div>
      

        
        <canvas id="ctx" style="position:absolute;left:0;top:0;z-index:-9;background-color: rgba(255, 255, 255, 1);width:100%;height:100%;">
        </canvas>
      <script src="safeEval.js"></script>
      <script>
        var currentProblemId
        const D = x => document.getElementById(x),
              E = x => document.createElement(x)
        const output = D('output-table')

        Create_All_Buttons_Once_When_The_Page_Loads: {
          let color = [248,253,253], row = E('div')
          for (let i in PROBLEM_DATA) {
            const btn = E('button'), rgba = `rgba(21${i%4===0?0:2},21${i%4===1?0:2},21${i%4===2?0:2},0.6`
            btn.type = 'button'
            btn.classList.add('btn')
            btn.style.margin = '5px'
            btn.style.width = '80px'
            btn.style.height = '80px'
            btn.style.font = '20px Arial'
            btn.style.background = rgba
            btn.style.transition = 'all 0.5s ease'
            btn.onmouseover=_=>btn.style.backgroundColor='#aae'
            btn.onmouseout=_=>btn.style.backgroundColor=rgba
            btn.id = +i
            btn.onclick = _ => showQuestion(btn.id)
            btn.innerHTML = (+i+1)
            row.appendChild(btn)
            if (i % 10 === 9) {            
              row.style.backgroundColor = `rgb(${color.join`,`})`
              color.forEach((_,i) => color[i] -= 13)
              D('main-page').appendChild(row)
              row = E('div')
            }
          }
        }


        var editor = window.ace.edit(D("editor"));
        editor.renderer.setShowGutter(false);
        const options = {
          enableBasicAutocompletion: true, // the editor completes the statement when you hit Ctrl + Space
          enableLiveAutocompletion: true, // the editor completes the statement while you are typing
          showPrintMargin: false, // hides the vertical limiting strip
          fontSize: "100%",
          maxLines: 1000,
          autoScrollEditorIntoView: true,
        }
      function goHome() { hideAllPagesExcept(D('main-page')) }
      function aboutPage() { hideAllPagesExcept(D('about-page')) }
      function logInPage() { hideAllPagesExcept(D('log-in-page')) }
      function signUpPage() { hideAllPagesExcept(D('sign-up-page')) }

      function clearOutputLog() {
        D('all-pass-message').innerHTML = D('hint').innerHTML = output.innerHTML = ''
        while (output.children[0]) output.removeChild(output.children[0])
        editor.focus()
      }
      function hideAllPagesExcept(x) {
        D('sign-up-page').style.display='none'
        D('problem-page').style.display='none'
        D('log-in-page').style.display='none'
        D('about-page').style.display='none'
        D('main-page').style.display='none'
        if (x) x.style.display='block'
      }

      function showQuestion(n) {
        currentProblemId = +n
        const a = currentProblemId === 0, b = currentProblemId === PROBLEM_DATA.length-1 

        with (D('previous')) {
          style.pointerEvents = a ? 'none' : 'auto'  
          style.color =         a ? '#999' : '#87a'
          style.cursor =        a ? 'default' : 'pointer'
        }
        with (D('next')) {
          style.pointerEvents = b ? 'none' : 'auto'  
          style.color =         b ? '#999' : '#87a'
          style.cursor =        b ? 'default' : 'pointer'
        }

        clearOutputLog()
        D('about-page').style.display='none'
        D('problem-page').style.display='block'
        D('main-page').style.display='none'

        D('problem-name').innerHTML = PROBLEM_DATA[n].name
        D('problem-description').innerHTML = PROBLEM_DATA[n].description
        D('problem-examples').innerHTML = PROBLEM_DATA[n].examples
        editor.setValue(PROBLEM_DATA[n].submission)
        editor.setOptions(options);
        editor.setTheme("ace/theme/chrome");
        editor.getSession().setMode("ace/mode/javascript");
        var row = editor.session.getLength() - 2
        editor.selection.moveTo(row)
        editor.navigateLineEnd()
      }

      function resetQuestion(n) {
        if (confirm('Are you sure you erase all your work?'))
          editor.setValue(PROBLEM_DATA[n].solutionSetup)
      }

      function runTests() {
        'use strict'   
        clearOutputLog()
        
        if (!arguments[0]) {
          output.innerHTML = 'running tests...'
          setTimeout(_ => runTests(true) , Math.random()*200 + 300 | 0)
          return
        }

        let passedAll = true    
        const { name, solution, testinputs } = PROBLEM_DATA[currentProblemId]
        const printOutput = [], super_log = console.log
        var submission
        try { 
          const src = editor.getValue()
          console.log = (...xs) => printOutput.push(xs.join` `); 
          eval('try{' + src +'\n; submission =' + name + '} catch(e) { submission = e.toString() } ') 
        } 
        catch(e) { output.innerHTML = e.toString() }
        if (typeof submission !== 'function') {
          output.innerHTML = submission || `syntax error or ${name} needs to be a function.`
          console.log = super_log
          return; 
        }
        
        const table = E('table')
        addHeaders: { 
          const row = E('tr'); 
          ['Expected', 'Actual',''].forEach(r => {
            const R = E('th')
            R.innerHTML = r
            row.append(R)
          })
          table.append(row) 
        }

        table.style.float = 'left'
        table.style.width = '100%'
        table.style.height = '20px'
        table.style.margin = '1px'
        for (let args of testinputs) {
          try {
            var actual = submission(...args)
          } catch (e) {
            actual = e.toString()
          }
          const expected = solution(...args)
          const pass = actual === expected
          passedAll = passedAll && pass
          const convert = x => ({"string":'"'+x+'"'})[typeof x] || x
          const row = E('tr')
          const [A,B,C] = [E('td'),E('td'),E('td')]
          A.innerHTML = `${name}(${args.map(convert).join` `}) → ${convert(expected)}`
          B.innerHTML = '' + convert(actual)
          C.style.color = pass ? '#505' : '#fff'
          C.innerHTML = pass ? 'passed!' : 'failed!'
          C.style.backgroundColor = pass ? '#0f0' : '#f00';
          [A,B,C].forEach(x => {
            x.style.border = '1px solid #bbb'
            row.append(x)
          })
          table.append(row) 
        }
        const tableContainer = E('div')
        tableContainer.style.overflowY = 'scroll'
        tableContainer.style.overflowX = 'hidden'
        tableContainer.style.maxHeight = '40vh'
        tableContainer.style.backgroundColor ='#ddd'
        tableContainer.style.borderLeft = tableContainer.style.borderTop = '1px solid #aaa'
        tableContainer.style.borderRight = tableContainer.style.borderBottom = '1px solid #ccc'
        tableContainer.append(table)
        output.append(tableContainer)

        D('all-pass-message').innerHTML = passedAll ? "You've passed all the tests!" : ''

        
        const logOutput = E('div')
        { const style = logOutput.style
          style.clear = 'both'
          style.width = '100%'
          style.marginTop = '2%'
          style.overflowY = 'scroll'
          style.maxHeight = '30vh'
          style.borderLeft = style.borderTop = '2px solid #aaa'
          style.borderRight = style.borderBottom = '2px solid #ccc'
        }
        logOutput.innerHTML = printOutput.map(x=>' &nbsp; '+x).join`<br>`
        if (printOutput.length) output.append(logOutput)
        
        console.log = super_log
      }

      </script>

      <script>
        
        const config = {
          apiKey: "AIzaSyAEu7t6BcYyJA1NqhMhYwSLVGbcUE4oivM",
          authDomain: "codingpro-5c5d9.firebaseapp.com",
          databaseURL: "https://codingpro-5c5d9.firebaseio.com",
          projectId: "codingpro-5c5d9",
          storageBucket: "codingpro-5c5d9.appspot.com",
          messagingSenderId: "350756630303",
          appId: "1:350756630303:web:1cf33ac22e3cd377534a2a"
        };

        firebase.initializeApp(config);

        // Initialize Cloud Firestore through Firebase
        // const db = firebase.firestore();
        // db.settings({ timestampsInSnapshots: true })

        // function renderDoc(doc) {
        //   console.log('doc.data',doc.data())
        // }

        // db.collection('users').get().then(snapshot => {
        //     snapshot.docs.forEach(renderDoc)
        // })

        // db.collection("users").add({
        //     first: "Ada",
        //     last: "Lovelace",
        //     born: 1815
        // })
        // .then(function(docRef) {
        //     console.log("Document written with ID: ", docRef.id);
        // })
        // .catch(function(error) {
        //     console.error("Error adding document: ", error);
        // });

        // function User(login,password) {
        //   this.login = login
        //   this.password = password
        //   this.completions = []
        //   this.submissions = []
        // }

        // function signUp(email,password) {
        //   firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
        //     var errorCode = error.code;
        //     var errorMessage = error.message;
        //     console.log(errorMessage)
        //   });
        // }
        // // signUp('ronaldmcorona@gmail.com','easypass123')

        // function signIn(email,password) {
        //   firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
        //     var errorCode = error.code;
        //     var errorMessage = error.message;
        //     console.log(errorMessage)
        //   });
        // }


      </script>
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


  </body>
</html>